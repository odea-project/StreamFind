<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Settings for finding features (i.e., chromatographic peaks)
in mzML/mzXML files using the OpenMS
(https://abibuilder.cs.uni-tuebingen.de/archive/openms/) software
with the algorithm
FeatureFinderMetabo.
The function uses the package patRoon in the background."><title>Settings_find_features_openms — Settings_find_features_openms • StreamFind</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Settings_find_features_openms — Settings_find_features_openms"><meta property="og:description" content="Settings for finding features (i.e., chromatographic peaks)
in mzML/mzXML files using the OpenMS
(https://abibuilder.cs.uni-tuebingen.de/archive/openms/) software
with the algorithm
FeatureFinderMetabo.
The function uses the package patRoon in the background."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">StreamFind</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/StreamFind.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/demo_ozonation_project.html">Wastewater ozonation showcase</a>
    <a class="dropdown-item" href="../articles/ms_developer_guide.html">Developer guide for mass spectrometry</a>
    <a class="dropdown-item" href="../articles/ms_overview.html">StreamFind for mass spectrometry</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/odea-project/StreamFind/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Settings_find_features_openms</h1>
      <small class="dont-index">Source: <a href="https://github.com/odea-project/StreamFind/blob/HEAD/R/fct_ms_default_ProcessingSettings.R" class="external-link"><code>R/fct_ms_default_ProcessingSettings.R</code></a></small>
      <div class="d-none name"><code>Settings_find_features_openms.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Settings for finding features (i.e., chromatographic peaks)
in mzML/mzXML files using the <a href="https://www.openms.org/" class="external-link">OpenMS</a>
(<a href="https://abibuilder.cs.uni-tuebingen.de/archive/openms/" class="external-link">https://abibuilder.cs.uni-tuebingen.de/archive/openms/</a>) software
with the algorithm
<a href="https://abibuilder.cs.uni-tuebingen.de/archive/openms/Documentation/release/latest/html/TOPP_FeatureFinderMetabo.html" class="external-link">FeatureFinderMetabo</a>.
The function uses the package <span class="pkg">patRoon</span> in the background.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Settings_find_features_openms</span><span class="op">(</span></span>
<span>  noiseThrInt <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  chromSNR <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  chromFWHM <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  mzPPM <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  reEstimateMTSD <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  traceTermCriterion <span class="op">=</span> <span class="st">"sample_rate"</span>,</span>
<span>  traceTermOutliers <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  minSampleRate <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  minTraceLength <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  maxTraceLength <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>  widthFiltering <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>  minFWHM <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  maxFWHM <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  traceSNRFiltering <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  localRTRange <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  localMZRange <span class="op">=</span> <span class="fl">6.5</span>,</span>
<span>  isotopeFilteringModel <span class="op">=</span> <span class="st">"metabolites (5% RMS)"</span>,</span>
<span>  MZScoring13C <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  useSmoothedInts <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extraOpts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  intSearchRTWindow <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  useFFMIntensities <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for Settings_find_features_openms</span></span>
<span><span class="fu">validate</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>noiseThrInt</dt>
<dd><p>Intensity threshold below which peaks are regarded as noise.</p></dd>


<dt>chromSNR</dt>
<dd><p>Minimum signal-to-noise a mass trace should have.</p></dd>


<dt>chromFWHM</dt>
<dd><p>Expected chromatographic peak width (in seconds).</p></dd>


<dt>mzPPM</dt>
<dd><p>Allowed mass deviation (in ppm).</p></dd>


<dt>reEstimateMTSD</dt>
<dd><p>Enables dynamic re-estimation of m/z variance during
mass trace collection stage.</p></dd>


<dt>traceTermCriterion</dt>
<dd><p>Termination criterion for the extension of mass
traces. In 'outlier' mode, trace extension cancels if a predefined number of
consecutive outliers are found (see trace_termination_outliers parameter).
In 'sample_rate' mode, trace extension in both directions stops if ratio of
found peaks versus visited spectra falls below the 'min_sample_rate' threshold.</p></dd>


<dt>traceTermOutliers</dt>
<dd><p>Mass trace extension in one direction cancels if
this number of consecutive spectra with no detectable peaks is reached.</p></dd>


<dt>minSampleRate</dt>
<dd><p>Minimum fraction of scans along the mass trace that must
contain a peak.</p></dd>


<dt>minTraceLength</dt>
<dd><p>Minimum expected length of a mass trace (in seconds).</p></dd>


<dt>maxTraceLength</dt>
<dd><p>Maximum expected length of a mass trace (in seconds).
Set to a negative value to disable maximal length check during mass trace
detection.</p></dd>


<dt>widthFiltering</dt>
<dd><p>Enable filtering of unlikely peak widths. The fixed
setting filters out mass traces outside the <code>min_fwhm</code>, <code>max_fwhm</code> interval
(set parameters accordingly!). The auto setting filters with the 5 and 95%
quantiles of the peak width distribution.</p></dd>


<dt>minFWHM</dt>
<dd><p>Minimum full-width-at-half-maximum of chromatographic peaks
(in seconds). Ignored if parameter width_filtering is off or auto.</p></dd>


<dt>maxFWHM</dt>
<dd><p>Maximum full-width-at-half-maximum of chromatographic peaks
(in seconds). Ignored if parameter width_filtering is off or auto.</p></dd>


<dt>traceSNRFiltering</dt>
<dd><p>Apply post-filtering by signal-to-noise ratio after
smoothing.</p></dd>


<dt>localRTRange</dt>
<dd><p>RT range where to look for coeluting mass traces.</p></dd>


<dt>localMZRange</dt>
<dd><p>MZ range where to look for isotopic mass traces.</p></dd>


<dt>isotopeFilteringModel</dt>
<dd><p>Remove/score candidate assemblies based on
isotope intensities. SVM isotope models for metabolites were trained with
either 2% or 5% RMS error. For peptides, an averagine cosine scoring is used.
Select the appropriate noise model according to the quality of measurement
or MS device.</p></dd>


<dt>MZScoring13C</dt>
<dd><p>Use the 13C isotope peak position (~1.003355 Da) as the
expected shift in m/z for isotope mass traces (highly recommended for
lipidomics!). Disable for general metabolites
(as described in Kenar et al. 2014, MCP.).</p></dd>


<dt>useSmoothedInts</dt>
<dd><p>Use LOWESS intensities instead of raw intensities.</p></dd>


<dt>extraOpts</dt>
<dd><p>= NULL,</p></dd>


<dt>intSearchRTWindow</dt>
<dd><p>Retention time window (in seconds, +/- feature
retention time) that is used to find the closest data point to the retention
time to obtain the intensity of a feature (this is needed since OpenMS does
not provide this data).</p></dd>


<dt>useFFMIntensities</dt>
<dd><p>If TRUE then peak intensities are directly loaded
from FeatureFinderMetabo output. Otherwise, intensities are loaded afterwards
from the input ‘mzML’ files, which is potentially much slower, especially
with many analyses files. However, useFFMIntensities=TRUE is still somewhat
experimental, may be less accurate and requires a recent version of OpenMS
(&gt;=2.7).</p></dd>


<dt>x</dt>
<dd><p>A Settings_find_features_openms S3 class object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A ProcessingSettings S3 class object with subclass
Settings_find_features_openms.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See the <a href="https://rdrr.io/pkg/patRoon/man/findFeaturesOpenMS.html" class="external-link">findFeaturesOpenMS</a> function from the
<span class="pkg">patRoon</span> package for more information and requirements.</p>
    </div>
    <div class="section level2">
    <h2 id="methods-by-generic-">Methods (by generic)<a class="anchor" aria-label="anchor" href="#methods-by-generic-"></a></h2>
    
<ul><li><p><code>validate(Settings_find_features_openms)</code>: Validates the object structure, returning a logical value of length one.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Helmus R, ter Laak TL, van Wezel AP, de Voogt P, Schymanski EL (2021).
“patRoon: open source software platform for environmental mass spectrometry based non-target screening.”
<em>Journal of Cheminformatics</em>, <b>13</b>(1).
<a href="https://doi.org/10.1186/s13321-020-00477-w" class="external-link">doi:10.1186/s13321-020-00477-w</a>
.</p>
<p>Helmus R, van de Velde B, Brunner AM, ter Laak TL, van Wezel AP, Schymanski EL (2022).
“patRoon 2.0: Improved non-target analysis workflows including automated transformation product screening.”
<em>Journal of Open Source Software</em>, <b>7</b>(71), 4029.
<a href="https://doi.org/10.21105/joss.04029" class="external-link">doi:10.21105/joss.04029</a>
.</p>
<p>Röst HL, Sachsenberg T, Aiche S, Bielow C, Weisser H, Aicheler F, Andreotti S, Ehrlich H, Gutenbrunner P, Kenar E, Liang X, Nahnsen S, Nilse L, Pfeuffer J, Rosenberger G, Rurik M, Schmitt U, Veit J, Walzer M, Wojnar D, Wolski WE, Schilling O, Choudhary JS, Malmström L, Aebersold R, Reinert K, Kohlbacher O (2016).
“OpenMS: a flexible open-source software platform for mass spectrometry data analysis.”
<em>Nature Methods</em>, <b>13</b>(9), 741--748.
<a href="https://doi.org/10.1038/nmeth.3959" class="external-link">doi:10.1038/nmeth.3959</a>
.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ricardo Cunha.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

