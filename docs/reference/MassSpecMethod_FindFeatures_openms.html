<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>MassSpecMethod_FindFeatures_openms class — MassSpecMethod_FindFeatures_openms • StreamFind</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="MassSpecMethod_FindFeatures_openms class — MassSpecMethod_FindFeatures_openms"><meta name="description" content="Settings for finding features (i.e., chromatographic peaks) in mzML/mzXML files
using the OpenMS
(https://abibuilder.cs.uni-tuebingen.de/archive/openms/) software with the algorithm
FeatureFinderMetabo.
The function uses the package patRoon in the background."><meta property="og:description" content="Settings for finding features (i.e., chromatographic peaks) in mzML/mzXML files
using the OpenMS
(https://abibuilder.cs.uni-tuebingen.de/archive/openms/) software with the algorithm
FeatureFinderMetabo.
The function uses the package patRoon in the background."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">StreamFind</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/StreamFind.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/app_guide.html">StreamFind App Guide</a></li>
    <li><a class="dropdown-item" href="../articles/demo_lc_dad_quantification_antibody.html">Quantification of Intact Monoclonal Antibody with LC-DAD</a></li>
    <li><a class="dropdown-item" href="../articles/demo_lc_hrms_identification_antibody.html">Identification of Intact Monoclonal Antibody with LC-HRMS</a></li>
    <li><a class="dropdown-item" href="../articles/demo_ms_raman_fusion_bsa.html">Purity Evaluation of Bovine Serum Albumin Products</a></li>
    <li><a class="dropdown-item" href="../articles/demo_nts.html">Non-target Analysis for Wastewater Treatment Evaluation</a></li>
    <li><a class="dropdown-item" href="../articles/developer_guide.html">StreamFind Developer Guide</a></li>
    <li><a class="dropdown-item" href="../articles/general_guide.html">StreamFind General Introduction</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/odea-project/StreamFind/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>MassSpecMethod_FindFeatures_openms class</h1>
      <small class="dont-index">Source: <a href="https://github.com/odea-project/StreamFind/blob/HEAD/R/class_MassSpecMethod_FindFeatures.R" class="external-link"><code>R/class_MassSpecMethod_FindFeatures.R</code></a></small>
      <div class="d-none name"><code>MassSpecMethod_FindFeatures_openms.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Settings for finding features (i.e., chromatographic peaks) in mzML/mzXML files
using the <a href="https://www.openms.org/" class="external-link">OpenMS</a>
(<a href="https://abibuilder.cs.uni-tuebingen.de/archive/openms/" class="external-link">https://abibuilder.cs.uni-tuebingen.de/archive/openms/</a>) software with the algorithm
<a href="https://abibuilder.cs.uni-tuebingen.de/archive/openms/Documentation/release/latest/html/TOPP_FeatureFinderMetabo.html" class="external-link">FeatureFinderMetabo</a>.
The function uses the package <span class="pkg">patRoon</span> in the background.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">MassSpecMethod_FindFeatures_openms</span><span class="op">(</span></span>
<span>  noiseThrInt <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  chromSNR <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  chromFWHM <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  mzPPM <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  reEstimateMTSD <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  traceTermCriterion <span class="op">=</span> <span class="st">"sample_rate"</span>,</span>
<span>  traceTermOutliers <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  minSampleRate <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  minTraceLength <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  maxTraceLength <span class="op">=</span> <span class="fl">70</span>,</span>
<span>  widthFiltering <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>  minFWHM <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  maxFWHM <span class="op">=</span> <span class="fl">35</span>,</span>
<span>  traceSNRFiltering <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  localRTRange <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  localMZRange <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  isotopeFilteringModel <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  MZScoring13C <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  useSmoothedInts <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  intSearchRTWindow <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  useFFMIntensities <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'MassSpecMethod_FindFeatures_openms'</span></span>
<span><span class="fu"><a href="validate_object.html">validate_object</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-noisethrint">noiseThrInt<a class="anchor" aria-label="anchor" href="#arg-noisethrint"></a></dt>
<dd><p>Intensity threshold below which peaks are regarded as noise.</p></dd>


<dt id="arg-chromsnr">chromSNR<a class="anchor" aria-label="anchor" href="#arg-chromsnr"></a></dt>
<dd><p>Minimum signal-to-noise a mass trace should have.</p></dd>


<dt id="arg-chromfwhm">chromFWHM<a class="anchor" aria-label="anchor" href="#arg-chromfwhm"></a></dt>
<dd><p>Expected chromatographic peak width (in seconds).</p></dd>


<dt id="arg-mzppm">mzPPM<a class="anchor" aria-label="anchor" href="#arg-mzppm"></a></dt>
<dd><p>Allowed mass deviation (in ppm).</p></dd>


<dt id="arg-reestimatemtsd">reEstimateMTSD<a class="anchor" aria-label="anchor" href="#arg-reestimatemtsd"></a></dt>
<dd><p>Enables dynamic re-estimation of m/z variance during
mass trace collection stage.</p></dd>


<dt id="arg-tracetermcriterion">traceTermCriterion<a class="anchor" aria-label="anchor" href="#arg-tracetermcriterion"></a></dt>
<dd><p>Termination criterion for the extension of mass
traces. In 'outlier' mode, trace extension cancels if a predefined number of
consecutive outliers are found (see trace_termination_outliers parameter).
In 'sample_rate' mode, trace extension in both directions stops if ratio of
found peaks versus visited spectra falls below the 'min_sample_rate' threshold.</p></dd>


<dt id="arg-tracetermoutliers">traceTermOutliers<a class="anchor" aria-label="anchor" href="#arg-tracetermoutliers"></a></dt>
<dd><p>Mass trace extension in one direction cancels if
this number of consecutive spectra with no detectable peaks is reached.</p></dd>


<dt id="arg-minsamplerate">minSampleRate<a class="anchor" aria-label="anchor" href="#arg-minsamplerate"></a></dt>
<dd><p>Minimum fraction of scans along the mass trace that must
contain a peak.</p></dd>


<dt id="arg-mintracelength">minTraceLength<a class="anchor" aria-label="anchor" href="#arg-mintracelength"></a></dt>
<dd><p>Minimum expected length of a mass trace (in seconds).</p></dd>


<dt id="arg-maxtracelength">maxTraceLength<a class="anchor" aria-label="anchor" href="#arg-maxtracelength"></a></dt>
<dd><p>Maximum expected length of a mass trace (in seconds).
Set to a negative value to disable maximal length check during mass trace
detection.</p></dd>


<dt id="arg-widthfiltering">widthFiltering<a class="anchor" aria-label="anchor" href="#arg-widthfiltering"></a></dt>
<dd><p>Enable filtering of unlikely peak widths. The fixed
setting filters out mass traces outside the <code>min_fwhm</code>, <code>max_fwhm</code> interval
(set parameters accordingly!). The auto setting filters with the 5 and 95%
quantiles of the peak width distribution.</p></dd>


<dt id="arg-minfwhm">minFWHM<a class="anchor" aria-label="anchor" href="#arg-minfwhm"></a></dt>
<dd><p>Minimum full-width-at-half-maximum of chromatographic peaks
(in seconds). Ignored if parameter width_filtering is off or auto.</p></dd>


<dt id="arg-maxfwhm">maxFWHM<a class="anchor" aria-label="anchor" href="#arg-maxfwhm"></a></dt>
<dd><p>Maximum full-width-at-half-maximum of chromatographic peaks
(in seconds). Ignored if parameter width_filtering is off or auto.</p></dd>


<dt id="arg-tracesnrfiltering">traceSNRFiltering<a class="anchor" aria-label="anchor" href="#arg-tracesnrfiltering"></a></dt>
<dd><p>Apply post-filtering by signal-to-noise ratio after
smoothing.</p></dd>


<dt id="arg-localrtrange">localRTRange<a class="anchor" aria-label="anchor" href="#arg-localrtrange"></a></dt>
<dd><p>RT range where to look for coeluting mass traces.</p></dd>


<dt id="arg-localmzrange">localMZRange<a class="anchor" aria-label="anchor" href="#arg-localmzrange"></a></dt>
<dd><p>MZ range where to look for isotopic mass traces.</p></dd>


<dt id="arg-isotopefilteringmodel">isotopeFilteringModel<a class="anchor" aria-label="anchor" href="#arg-isotopefilteringmodel"></a></dt>
<dd><p>Remove/score candidate assemblies based on
isotope intensities. SVM isotope models for metabolites were trained with
either 2% or 5% RMS error. For peptides, an averagine cosine scoring is used.
Select the appropriate noise model according to the quality of measurement
or MS device.</p></dd>


<dt id="arg-mzscoring-c">MZScoring13C<a class="anchor" aria-label="anchor" href="#arg-mzscoring-c"></a></dt>
<dd><p>Use the 13C isotope peak position (~1.003355 Da) as the
expected shift in m/z for isotope mass traces (highly recommended for
lipidomics!). Disable for general metabolites
(as described in Kenar et al. 2014, MCP.).</p></dd>


<dt id="arg-usesmoothedints">useSmoothedInts<a class="anchor" aria-label="anchor" href="#arg-usesmoothedints"></a></dt>
<dd><p>Use LOWESS intensities instead of raw intensities.</p></dd>


<dt id="arg-intsearchrtwindow">intSearchRTWindow<a class="anchor" aria-label="anchor" href="#arg-intsearchrtwindow"></a></dt>
<dd><p>Retention time window (in seconds, +/- feature
retention time) that is used to find the closest data point to the retention
time to obtain the intensity of a feature (this is needed since OpenMS does
not provide this data).</p></dd>


<dt id="arg-useffmintensities">useFFMIntensities<a class="anchor" aria-label="anchor" href="#arg-useffmintensities"></a></dt>
<dd><p>If TRUE then peak intensities are directly loaded
from FeatureFinderMetabo output. Otherwise, intensities are loaded afterwards
from the input ‘mzML’ files, which is potentially much slower, especially
with many analyses files. However, useFFMIntensities=TRUE is still somewhat
experimental, may be less accurate and requires a recent version of OpenMS
(&gt;=2.7).</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical of length one. When TRUE adds processing information to the console.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>MassSpecMethod_FindFeatures_openms</code> object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>MassSpecMethod_FindFeatures_openms</code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See the <a href="https://rdrr.io/pkg/patRoon/man/findFeaturesOpenMS.html" class="external-link">findFeaturesOpenMS</a> function from the <span class="pkg">patRoon</span> package for
more information and requirements.</p>
    </div>
    <div class="section level2">
    <h2 id="methods-by-generic-">Methods (by generic)<a class="anchor" aria-label="anchor" href="#methods-by-generic-"></a></h2>

<ul><li><p><code>validate_object(MassSpecMethod_FindFeatures_openms)</code>: Validate the <code>MassSpecMethod_FindFeatures_openms</code> object, returning <code>NULL</code> if valid.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Helmus R, ter Laak TL, van Wezel AP, de Voogt P, Schymanski EL (2021).
“patRoon: open source software platform for environmental mass spectrometry based non-target screening.”
<em>Journal of Cheminformatics</em>, <b>13</b>(1).
<a href="https://doi.org/10.1186/s13321-020-00477-w" class="external-link">doi:10.1186/s13321-020-00477-w</a>
.</p>
<p>Helmus R, van de Velde B, Brunner AM, ter Laak TL, van Wezel AP, Schymanski EL (2022).
“patRoon 2.0: Improved non-target analysis workflows including automated transformation product screening.”
<em>Journal of Open Source Software</em>, <b>7</b>(71), 4029.
<a href="https://doi.org/10.21105/joss.04029" class="external-link">doi:10.21105/joss.04029</a>
.</p>
<p>Röst HL, Sachsenberg T, Aiche S, Bielow C, Weisser H, Aicheler F, Andreotti S, Ehrlich H, Gutenbrunner P, Kenar E, Liang X, Nahnsen S, Nilse L, Pfeuffer J, Rosenberger G, Rurik M, Schmitt U, Veit J, Walzer M, Wojnar D, Wolski WE, Schilling O, Choudhary JS, Malmström L, Aebersold R, Reinert K, Kohlbacher O (2016).
“OpenMS: a flexible open-source software platform for mass spectrometry data analysis.”
<em>Nature Methods</em>, <b>13</b>(9), 741–748.
<a href="https://doi.org/10.1038/nmeth.3959" class="external-link">doi:10.1038/nmeth.3959</a>
.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ricardo Cunha.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

