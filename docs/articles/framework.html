<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="StreamFind">
<title>StreamFind General Introduction • StreamFind</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="StreamFind General Introduction">
<meta property="og:description" content="StreamFind">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">StreamFind</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/StreamFind.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/demo_ozonation_project.html">Evaluation of Wastewater Ozonation with Mass Spectrometry</a>
    <a class="dropdown-item" href="../articles/framework.html">StreamFind General Introduction</a>
    <a class="dropdown-item" href="../articles/ms_developer_guide.html">Developer Guide</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/odea-project/StreamFind/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>StreamFind General Introduction</h1>
                        <h4 data-toc-skip class="author">Ricardo
Cunha</h4>
                  <a class="author_email" href="mailto:#"></a><a href="mailto:cunha@iuta.de" class="email">cunha@iuta.de</a>
      
                  
            <h4 data-toc-skip class="date">08 March, 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/odea-project/StreamFind/blob/HEAD/vignettes/articles/framework.Rmd" class="external-link"><code>vignettes/articles/framework.Rmd</code></a></small>
      <div class="d-none name"><code>framework.Rmd</code></div>
    </div>

    
    
<style>
pre {
  overflow-x: auto;
}
pre code {
  word-wrap: normal;
  white-space: pre;
}
</style>
<p><br></p>
<p><br></p>
<hr>
<div class="section level2">
<h2 id="platform">Platform<a class="anchor" aria-label="anchor" href="#platform"></a>
</h2>
<p>The StreamFind platform is a data processing workflow designer with a
microservices architecture. Besides data processing, the platform can
also be used for data management, visualization and reporting. This
guide focuses on describing the general framework behind the StreamFind,
using the already available R library as example. Development of the
StreamFind platform as Python and C++ libraries is planned and will
support other types of data. The behavior and usage of the StreanFind is
expected to be similar across R, Python and C++. This is achieved by
using reference classes with harmonized methods for the different
languages. For instance, the StreamFind R library is centered around <a href="https://r6.r-lib.org/index.html" class="external-link">R6</a> classes, serving as data
processing engines (used as metaphor) for different types of data
(e.g. Mass Spectrometry (MS) and Raman Spectroscopy data).</p>
</div>
<div class="section level2">
<h2 id="data-processing-engines">Data processing engines<a class="anchor" aria-label="anchor" href="#data-processing-engines"></a>
</h2>
<p>Data processing engines are fundamentally reference classes with
methods to manage, process, visualize and report data within a project.
The <code>CoreEngine</code> is the parent class of all other data
specific engines. As parent, the <code>CoreEngine</code> manages the
project information via the class <code>ProjectHeaders</code> and
registers the audit trail as well as other uniform functions
(e.g. adding and removing analysis from the project) across child data
dedicated engines.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">core</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/CoreEngine.html">CoreEngine</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>✓ Engine created!</code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">core</span></span></code></pre></div>
<pre><code>
CoreEngine
name          NA
author        NA
path          NA
date          2024-03-08 14:32:39.196527

Workflow empty 

Analyses empty </code></pre>
<p>Note that when an empty <code>CoreEngine</code> is created, required
<code>ProjectHeaders</code> are created with name, author, path and
date. Yet, <code>ProjectHeaders</code> can be specified directly during
creation of the <code>CoreEngine</code> via the argument
<code>headers</code> or added to the engine as shown in
@ref(project-headers). The <code>CoreEngine</code> does not directly
handles data processing. Processing methods are data specific and
therefore, are used via the data dedicated engines (e.g.,
<code>MassSpecEngine</code> and <code>RamanEngine</code>).</p>
<div class="section level3">
<h3 id="project-headers">Project headers<a class="anchor" aria-label="anchor" href="#project-headers"></a>
</h3>
<p>The <code>ProjectHeaders</code> class is meant to hold project
information that can be used to identify the engine when for example,
combining different engines, or to add extra information, such as
description, location, etc. The user can add any kind of attribute but
it must have length one and be named. Below, <code>ProjectHeaders</code>
are created and added to the <code>CoreEngine</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">headers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ProjectHeaders.html">ProjectHeaders</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Project Example"</span>, author <span class="op">=</span> <span class="st">"Person Name"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Example of project headers"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">core</span><span class="op">$</span><span class="fu">add_headers</span><span class="op">(</span><span class="va">headers</span><span class="op">)</span></span></code></pre></div>
<pre><code>✓ Added headers!</code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">core</span><span class="op">$</span><span class="fu">get_headers</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>
  ProjectHeaders 
  name: Project Example
  author: Person Name
  description: Example of project headers
  path: NA
  date: 2024-03-08 14:32:39.26849</code></pre>
</div>
<div class="section level3">
<h3 id="processingsettings">ProcessingSettings<a class="anchor" aria-label="anchor" href="#processingsettings"></a>
</h3>
<p>The unit of a data processing workflow in a data dedicated engine is
a data processing method, which uses a specific algorithm for data
processing. To harmonize the diversity of processing methods and
algorithms available, a general call <code>ProcessingSettings</code> is
used (shown below). This way, the <code>ProcessingSettings</code>
objects are use as instructions to assemble a data processing workflow
within the engine.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ProcessingSettings.html">ProcessingSettings</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>
 ProcessingSettings 
 call         NA
 algorithm    NA
 version      NA
 software     NA
 developer    NA
 contact      NA
 link         NA
 doi          NA

 parameters: empty  </code></pre>
<p>A <code>ProcessingSettings</code> object must always have the call
name of the processing method, the name and version of the algorithm to
be applied, the origin software, the main developer name and contact as
well as a link to further information and the DOI, when available.
Lastly but not least, the parameters which is a flexible list of
conditions to apply the algorithm during data processing. As example,
<code>ProcessingSettings</code> for centroiding MS data using the
qCentroids from the <a href="https://github.com/odea-project/qAlgorithms" class="external-link">qAlgorihtms</a> and
for annotating features using a native algorithm from StreamFind R
library are shown below. Each <code>ProcessingSettings</code> object has
a dedicated constructor method with documentation to support the
usage.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Settings_centroid_spectra_qCentroids.html">Settings_centroid_spectra_qCentroids</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>
 ProcessingSettings 
 call         centroid_spectra
 algorithm    qCentroids
 version      0.2.0
 software     qAlgorithms
 developer    Gerrit Renner
 contact      gerrit.renner@uni-due.de
 link         https://github.com/odea-project/qAlgorithms
 doi          https://doi.org/10.1007/s00216-022-04224-y

 parameters: 
  -  maxScale 5 
  -  mode 1 
  -  runParallel FALSE </code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Settings_annotate_features_StreamFind.html">Settings_annotate_features_StreamFind</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>
 ProcessingSettings 
 call         annotate_features
 algorithm    StreamFind
 version      0.2.0
 software     StreamFind
 developer    Ricardo Cunha
 contact      cunha@iuta.de
 link         https://odea-project.github.io/StreamFind/reference/Settings_annotate_features_StreamFind.html
 doi          NA

 parameters: 
  -  maxIsotopes 5 
  -  elements C H N O S Cl Br 
  -  mode small molecules 
  -  maxCharge 1 
  -  rtWindowAlignment 0.3 
  -  maxGaps 1 
  -  runParallel FALSE </code></pre>
</div>
<div class="section level3">
<h3 id="analysis">Analysis<a class="anchor" aria-label="anchor" href="#analysis"></a>
</h3>
<p>The actual data for a given engine is handled via dedicated analysis
class objects. Similar to the engines, these have the class
<code>Analysis</code> as parent class to handle common attributes and
methods. For instance, name, replicate and blank are example of common
attributes across different data types.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/Analysis.html">Analysis</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span></span>
<span>  <span class="va">Analysis</span> </span>
<span>  <span class="va">name</span><span class="op">:</span> <span class="cn">NA</span></span>
<span>  <span class="va">replicate</span><span class="op">:</span> <span class="cn">NA</span></span>
<span>  <span class="va">blank</span><span class="op">:</span> <span class="cn">NA</span></span></code></pre>
<p>A child example is given below for the <code>MassSpecAnalysis</code>
class to be used in the <code>MassSpecEngine</code>. The method
<code>parse_MassSpecAnalysis</code> uses a vector with file paths as
argument, returning a list of <code>MassSpecAnalysis</code> object for
each file path. Extra attributes are added to further describe the
specific analysis. The structure and complexity of the class is
therefore dependent on the type of data.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example for Mass Spectrometry data</span></span>
<span><span class="fu"><a href="../reference/MassSpecAnalysis.html">parse_MassSpecAnalysis</a></span><span class="op">(</span><span class="fu">StreamFindData</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/StreamFindData/man/get_ms_file_paths.html" class="external-link">get_ms_file_paths</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code>$`00_tof_s_is_pos_cent-r001`

  MassSpecAnalysis Analysis 
  name              00_tof_s_is_pos_cent-r001
  replicate         00_tof_s_is_pos_cent
  blank             NA
  format            mzML
  type              MS/MS-DDA
  spectra number    1886
  spectra mode      centroid
  spectra levels    1 2
  chromatograms     0
  has ion mobility  FALSE
  polarity          positive</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="child-engines">Child engines<a class="anchor" aria-label="anchor" href="#child-engines"></a>
</h2>
<p>The <code>CoreEngine</code> does not handle processing directly. The
data processing is delegated to child engines. The most basic is the
<code>XyEngine</code>, where any two-dimensional data can be used. A
simple example is given below for creating the engine and accessing the
data.</p>
</div>
<div class="section level2">
<h2 id="project-management">Project management<a class="anchor" aria-label="anchor" href="#project-management"></a>
</h2>
<p>p</p>
<p>The R package is in the <a href="https://github.com/odea-project/StreamFind" class="external-link">StreamFind GitHub
repository</a> of the <a href="https://github.com/odea-project" class="external-link">ODEA
Project</a>. For development, the recommendation is to download the
repository locally using <a href="https://git-scm.com/" class="external-link">git</a> tracking
for version control. The <a href="https://desktop.github.com/" class="external-link">GitHub
desktop</a> tool can be used for more easily install and configure git
with your GitHub account, which is recommended for authoring
contributions. Since it is an R package, the <a href="https://posit.co/products/open-source/rstudio/" class="external-link">RStudio</a> IDE is
recommended for development. Yet, others (e.g., <a href="https://code.visualstudio.com/download" class="external-link">VS Code</a>) will also
work. When using RStudio, the repository can be downloaded via new
project, selecting version control, then git and finally adding the
GitHub <em>url</em> <a href="https://github.com/odea-project/StreamFind" class="external-link uri">https://github.com/odea-project/StreamFind</a>. This should
create a local image of the StreamFind repository directly with git
tracking, if git or GitHub desktop were properly installed and
configured. When using RStudio, the project should directly be
identified as package development where all tools are available to
support development. We recommend setting the <em>Use devtools package
functions if available</em> and <em>generate documentation via
Roxygen</em> (in the configure bottom you select all options) located in
the <em>Build</em> tab under the <em>Configure Build Tools…</em>. For
other IDEs, we recommend using the package <a href="https://www.r-project.org/nosvn/pandoc/devtools.html" class="external-link">devtools</a>.
Considering that the local image of the StreamFind repository is
installed with git tracking, the first step for development is to create
a dedicated branch for implementation of new processing modules and/or
algorithms. The master branch should not be changed directly but
modified by pull requests from the dedicated development branch, giving
the opportunity for code revision.</p>
<div class="section level3">
<h3 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a>
</h3>
<p>The streamFind R package is centered around the <a href="https://r6.r-lib.org/index.html" class="external-link">R6</a> class system, which brings
object oriented programming to R. For MS, the <a href="https://odea-project.github.io/StreamFind/reference/MassSpecData.html">MassSpecData</a>
R6 class is used to encapsulate both the data and methods. The data is
stored in private fields within the <em>MassSpecData</em> and can only
be accessed and processed via the public methods. Below the creation of
a <em>MassSpecData</em> object and the way to access and change data is
briefly shown.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ms</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/MassSpecData.html">MassSpecData</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>✓ MassSpecData class object created!</code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ms</span><span class="op">$</span><span class="fu">add_headers</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Example"</span>, author <span class="op">=</span> <span class="st">"Person A"</span><span class="op">)</span></span></code></pre></div>
<pre><code>✓ Added headers!</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ms</span><span class="op">$</span><span class="fu">get_headers</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>
  ProjectHeaders 
  name: Example
  author: Person A
  path: NA
  date: 2024-03-08 14:32:39.976564</code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print method. Note that MS data files were not yet added!</span></span>
<span><span class="va">ms</span></span></code></pre></div>
<pre><code>
MassSpecData
name          Example
author        Person A
path          NA
date          2024-03-08 14:32:39.976564

Workflow: No methods found! 

Analyses: No files found! </code></pre>
<p>For implementation of processing modules and algorithms, the <a href="https://rstudio-education.github.io/hopr/s3.html" class="external-link">S3</a> class <a href="https://odea-project.github.io/StreamFind/reference/ProcessingSettings.html">ProcessingSettings</a>
is used to dispatch settings to processing modules. See article <a href="XXX">Wastewater ozonation showcase</a> for demonstration of usage.
In essence, a given algorithm to be applied to a processing method is
added to the <em>MassSpecData</em> as a <em>ProcessingSettings</em>
object which is then used to process the data with the defined settings
or parameters. The structure of a <em>ProcessingSettings</em> is
exemplified below for the algorithm <code>openms</code> to be applied to
the module <code>MassSpecData$find_features()</code>.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ffs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Settings_find_features_openms.html">Settings_find_features_openms</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ffs</span></span></code></pre></div>
<pre><code>
 ProcessingSettings 
 call         find_features
 algorithm    openms
 version      0.2.0
 software     openms
 developer    Oliver Kohlbacher
 contact      oliver.kohlbacher@uni-tuebingen.de
 link         https://openms.de/
 doi          https://doi.org/10.1038/nmeth.3959

 parameters: 
  -  noiseThrInt 1000 
  -  chromSNR 3 
  -  chromFWHM 7 
  -  mzPPM 15 
  -  reEstimateMTSD TRUE 
  -  traceTermCriterion sample_rate 
  -  traceTermOutliers 5 
  -  minSampleRate 1 
  -  minTraceLength 4 
  -  maxTraceLength 70 
  -  widthFiltering fixed 
  -  minFWHM 4 
  -  maxFWHM 35 
  -  traceSNRFiltering TRUE 
  -  localRTRange 0 
  -  localMZRange 0 
  -  isotopeFilteringModel none 
  -  MZScoring13C FALSE 
  -  useSmoothedInts FALSE 
  -  extraOpts 
  -  intSearchRTWindow 3 
  -  useFFMIntensities FALSE 
  -  verbose FALSE </code></pre>
<p>As shown, the constructor of a <em>ProcessingSettings</em> is a
function always including
<code>Settings_[module name]_[algorithm name]</code>; More details are
given in the Semantics (@ref(semantics)). Then, the
<em>ProcessingSettings</em> can be directly added to the
MassSpecData.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ms</span><span class="op">$</span><span class="fu">add_settings</span><span class="op">(</span><span class="va">ffs</span><span class="op">)</span></span></code></pre></div>
<pre><code>✓ find_features processing settings added!</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ms</span></span></code></pre></div>
<pre><code>
MassSpecData
name          Example
author        Person A
path          NA
date          2024-03-08 14:32:39.976564

Workflow: 
 1: find_features (openms)


Analyses: No files found! </code></pre>
<p>Alternatively, the <em>ProcessingSettings</em> can be saved as a JSON
string and imported from a JSON file, as demonstrated below.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/save_default_ProcessingSettings.html">save_default_ProcessingSettings</a></span><span class="op">(</span></span>
<span>  call <span class="op">=</span> <span class="st">"find_features"</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="st">"xcms3_centwave"</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"ffs"</span>,</span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/prettify.html" class="external-link">prettify</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="st">"~/github/StreamFind/vignettes/articles/ffs.json"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>{
    "call": [
        "find_features"
    ],
    "algorithm": [
        "xcms3_centwave"
    ],
    "parameters": {
        "class": [
            "CentWaveParam"
        ],
        "ppm": [
            12
        ],
        "peakwidth": [
            5,
            60
        ],
        "snthresh": [
            15
        ],
        "prefilter": [
            5,
            1500
        ],
        "mzCenterFun": [
            "wMean"
        ],
        "integrate": [
            1
        ],
        "mzdiff": [
            -0.0002
        ],
        "fitgauss": [
            true
        ],
        "noise": [
            500
        ],
        "verboseColumns": [
            true
        ],
        "roiList": [

        ],
        "firstBaselineCheck": [
            false
        ],
        "roiScales": [

        ],
        "extendLengthMSW": [
            false
        ]
    },
    "version": [
        "0.2.0"
    ],
    "software": [
        "xcms"
    ],
    "developer": [
        "Ralf Tautenhahn, Johannes Rainer"
    ],
    "contact": [
        "rtautenh@ipb-halle.de"
    ],
    "link": [
        "https://bioconductor.org/packages/release/bioc/html/xcms.html"
    ],
    "doi": [
        "https://doi.org/10.1186/1471-2105-9-504"
    ]
}
 </code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ms</span><span class="op">$</span><span class="fu">import_settings</span><span class="op">(</span><span class="st">"~/github/StreamFind/vignettes/articles/ffs.json"</span><span class="op">)</span></span></code></pre></div>
<pre><code>✓ find_features processing settings replaced!</code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># "openms" replaced by "xcms3_centwave"</span></span>
<span><span class="va">ms</span></span></code></pre></div>
<pre><code>
MassSpecData
name          Example
author        Person A
path          NA
date          2024-03-08 14:32:39.976564

Workflow: 
 1: find_features (xcms3_centwave)


Analyses: No files found! </code></pre>
<p>The use of the S3 object system for <em>ProcessingSettings</em> gives
flexibility to the list of parameters, meaning that each parameter entry
can be a single numeric value, a vector of strings or even a full
data.frame if required. Each <em>ProcessingSettings</em> constructor
(i.e., <code>Settings_[module name]_[algorithm name]</code>) has a
dedicated validation method to ensure that the parameters and metadata
are in conformity (as shown below). The validation of a
<em>ProcessingSettings</em> is always performed before applying it to a
processing module.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">validate</span><span class="op">(</span><span class="va">ffs</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>Besides the S3 class <em>ProcessingSettings</em>, the
<em>ProcessingSettings</em> object receives other class names that are
used for S3 method dispatchment (i.e., direct the object to the
dedicated S3 method where the actual processing algorithm is applied).
Below we show the classes of the <code>ffs</code>
<em>ProcessingSettings</em>. The class <em>patRoon</em> means that the
algorithm <code>openms</code> is applied via the package <a href="https://github.com/rickhelmus/patRoon" class="external-link">patRoon</a>. The class
<em>Settings_find_features_openms</em> directs the object to the right
processing module and indicates which algorithm to be applied. For this,
an <a href="http://adv-r.had.co.nz/S3.html" class="external-link">S3 generic</a> is used in
each processing module (e.g., <code>MassSpecData$find_features()</code>
or <code>MassSpecData$group_features()</code>) for the dispatchment.
This process is not visible to the user but is essential for the
developer. Implementation of new processing modules and/or algorithms
must consider this structure. In the section Implementation
(@ref(implementation)) the process of adding new modules and algorithms
is described in more detail.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">ffs</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "ProcessingSettings"            "Settings_find_features_openms"
[3] "patRoon"                      </code></pre>
</div>
<div class="section level3">
<h3 id="semantics">Semantics<a class="anchor" aria-label="anchor" href="#semantics"></a>
</h3>
<p>Consistent semantics are attempted within the StreamFind R package.
Some of the class and method names were already mentioned above and a
clear use of the <em>underscore</em> to separate words for methods and
use of <em>Upper Camel Case</em> for classes is visible. In this
section, we try to highlight the defined rules for the most important
semantic aspects. All the methods available via the class
<code>MassSpecData$</code> are written with underscore to separate the
words (e.g., <code>get_analysis_names()</code> or
<code>annotate_features()</code>). The arguments of methods, functions
and class constructors are always written with <em>Lower Camel Case</em>
when more than one word is needed (e.g., <code>colorBy</code> or
<code>minIntensity</code>). Classes are written with <em>Upper Camel
Case</em> when two or more words are used (e.g.,
<em>MassSpecAnalysis</em> or <em>ProjectHeaders</em>) with the exception
of the specific constructor functions for the different algorithm
settings, which use the syntax
<code>Settings_[module name]_[algorithm name]</code> (e.g.,
<em>Settings_filter_features_StreamFind</em> or
<em>Settings_bin_spectra_qBinning</em>); This supports and facilitates
the association of the settings with the respective processing module.
Functions or methods not available to the user (i.e., not exported via
the package NAMESPACE) are written with <code>.</code> at the beginning,
followed by <em>underscore</em> to separate words (e.g.,
<em>.get_colors()</em> or <em>.plot_ms2_static()</em>). This is also
applied to the S3 generics of the processing modules, which use the
syntax <code>.s3_ms_[module name]</code> (e.g.,
<code>.s3_ms_find_features</code> or
<code>.s3_ms_group_features</code>).</p>
</div>
<div class="section level3">
<h3 id="files">Files<a class="anchor" aria-label="anchor" href="#files"></a>
</h3>
<p>The file structure of the StreamFind package is in line with the <a href="https://cran.r-project.org/doc/manuals/R-exts.html#:~:text=Contents%5D%5BIndex%5D-,1.1%20Package%20structure,which%20should%20not%20be%20empty" class="external-link">CRAN
official package development guideline</a>.). All relevant files for the
developer are in the R, src, man-roxygen, tests and vignettes. In the R
folder are the R scripts, in the src folder are C++ libraries and the <a href="https://cran.r-project.org/web/packages/Rcpp/index.html" class="external-link">Rcpp</a>
interface functions, in the man-roxygen are the templates for
documentation of arguments, in the tests are the test units that should
be applied for each processing module and each algorithm implementation
and finally, in the vignettes are articles, tutorial and guides for the
users. R file names in the R folder have a defined name syntax according
to the content/function. Class files are named with
<code>class_[class type in capital_[class name].R]</code>. Exported MS
function files are named with <code>fct_ms_[unique name].R</code>. MS
utility functions not exported are named with
<code>utils_ms_[unique name].R</code>. S3 methods for processing modules
are written with <code>methods_S3_ms_[module name]_[algorithm].R</code>.
<em>ProcessingSettings</em> constructors are named
<code>constructor_S3_ms_[module name]_[algorithm].R</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="implementation">Implementation<a class="anchor" aria-label="anchor" href="#implementation"></a>
</h2>
<p>The implementation of new processing modules and new algorithms for a
given processing modules differ in terms of impact change. While
addition of new processing modules require the change of the main
<em>MassSpecData</em> class and addition of new S3 generics, adding new
algorithms for existing modules do not require changes in the existing
files. Therefore, we describe their implementation in two separate
sections.</p>
<div class="section level3">
<h3 id="new-modules">New modules<a class="anchor" aria-label="anchor" href="#new-modules"></a>
</h3>
<p>Under definition.</p>
</div>
<div class="section level3">
<h3 id="new-algorithms">New algorithms<a class="anchor" aria-label="anchor" href="#new-algorithms"></a>
</h3>
<p>Under definition.</p>
<hr>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ricardo Cunha.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
